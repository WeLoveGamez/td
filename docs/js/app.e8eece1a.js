(function(e){function t(t){for(var i,o,a=t[0],s=t[1],l=t[2],u=0,h=[];u<a.length;u++)o=a[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);d&&d(t);while(h.length)h.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],i=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(i=!1)}i&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},c=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/td/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0577":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,"*[data-v-7d279aa2]{color:#000}",""]),e.exports=t},"0f35":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#fff}#nav{padding:10px;margin-bottom:5px;border-bottom:1px solid #000}#nav a{font-weight:700;color:#fff}#nav a.router-link-exact-active{color:#42b983}",""]),e.exports=t},"11d4":function(e,t,n){"use strict";n("c91a")},"37b0":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,':root{--general:#3b3b3b;--button:#3b3b3b;--button-darker:#666;--button-darkest:#1a1a1a}#game{background-image:url(/td/bgbig.gif);background-position:0 -500px}.offsetRow:nth-child(odd){margin-top:25px}.hex{position:relative;margin:2px 8px;box-shadow:4px 7px 40px 0 rgba(0,0,0,.88);background-color:var(--hex-color)}.hex.field{width:28px;height:48px;--hex-side-width:14px;--hex-side-height:24px}.hex.tower{width:24px;height:41px;--hex-side-width:12px;--hex-side-height:20px;z-index:3;position:absolute;left:-6px;margin-top:4px;box-shadow:0 0 30px 10px rgba(0,0,0,.5)}.hex:after,.hex:before{content:"";position:absolute;width:0;border-top:var(--hex-side-height) solid transparent;border-bottom:var(--hex-side-height) solid transparent}.hex:after{right:100%;border-right:var(--hex-side-width) solid var(--hex-color)}.hex:before{left:100%;border-left:var(--hex-side-width) solid var(--hex-color)}.hex:focus{filter:brightness(.8)}.hex:focus:after{right:100%}.hex:focus:before{left:100%}.button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center;position:relative;width:168px;height:48px;margin:2px 17px;background-color:var(--button);box-shadow:4px 7px 10px 0 rgba(0,0,0,.88);color:#fff!important}.button:hover{background-color:var(--button-darker)}.button:hover:before{left:100%;border-left:14px solid var(--button-darker)}.button:hover:after{right:100%;border-right:14px solid var(--button-darker)}.button:active{transform:scale(.9);background-color:var(--button-darkest)}.button:active:before{left:100%;border-left:14px solid var(--button-darkest)}.button:active:after{right:100%;border-right:14px solid var(--button-darkest)}.button:after,.button:before{content:"";position:absolute;width:0;border-top:24px solid transparent;border-bottom:24px solid transparent}.button:before{left:100%;border-left:14px solid var(--button)}.button:after{right:100%;border-right:14px solid var(--button);top:0}.card{box-shadow:4px 7px 10px 0 rgba(0,0,0,.88);background-color:var(--general)!important;color:#fff!important}.card .card-header{box-shadow:inset 16px 22px 20px -14px hsla(0,0%,100%,.226)}.card .card-body{box-shadow:inset 16px 0 20px -14px hsla(0,0%,100%,.226)}',""]),e.exports=t},4249:function(e,t,n){var i=n("6218");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("85cb6b30",i,!0,{sourceMap:!1,shadowMode:!1})},"457c":function(e,t,n){var i=n("bd6f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("4756a336",i,!0,{sourceMap:!1,shadowMode:!1})},"4a3c":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'.hex[data-v-46c2c456]:before{content:"\\2B22";display:flex;margin-top:-35px;margin-left:-5px;transform:rotate(-29deg)}',""]),e.exports=t},"505e":function(e,t,n){"use strict";n("457c")},"5ef0":function(e,t,n){"use strict";n("af5d")},6218:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".cardOption{color:#000!important;background-color:#fff!important}.cardOption :hover{color:#fff!important;background-color:#000!important}",""]),e.exports=t},a66a:function(e,t,n){var i=n("0f35");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("6ffe208d",i,!0,{sourceMap:!1,shadowMode:!1})},abe2:function(e,t,n){var i=n("37b0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("5d15161b",i,!0,{sourceMap:!1,shadowMode:!1})},af5d:function(e,t,n){var i=n("0577");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("06fc3caf",i,!0,{sourceMap:!1,shadowMode:!1})},bd6f:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,"*[data-v-660cf77d]{font-family:Arial,Helvetica,sans-serif;color:#000}",""]),e.exports=t},bf04:function(e,t,n){"use strict";n("4249")},c91a:function(e,t,n){var i=n("4a3c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("e81a8e64",i,!0,{sourceMap:!1,shadowMode:!1})},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23");function r(e,t){var n=Object(i["C"])("router-view");return Object(i["v"])(),Object(i["e"])(n)}n("ceab");var c=n("6b0d"),o=n.n(c);const a={},s=o()(a,[["render",r]]);var l=s,d=n("1da1"),u=(n("96cf"),n("d3b7"),n("6c02")),h=(n("e9c4"),n("a15b"),n("99af"),n("07ac"),n("b680"),n("4de4"),{class:"d-flex justify-content-center pt-2",style:{position:"relative",width:"100%"}}),p={key:0,class:"mt-4"},b={class:"d-flex justify-content-center"},f=["onClick"],v=["id"],g=["id"],j=["points"],O={id:"polylineContainer",style:{position:"absolute",left:"0",top:"0","pointer-events":"none",width:"100%",height:"100%"}},m=["cx","cy","r","fill"],y=["points"],w=["points"],x=["cx","cy","r","stroke"],k={id:"playMenu",class:"card w-100 shadow-none",style:{position:"absolute",bottom:"0px"}},P={class:"card-body d-flex row col-12"},T={class:"col-1"},E={class:"m-4"},S=Object(i["h"])("i",{class:"fas fa-coins",style:{color:"rgb(214, 188, 38)"}},null,-1),M={class:"m-4"},H=Object(i["h"])("i",{class:"fas fa-heart",style:{color:"rgb(187, 19, 19)"}},null,-1),I={class:"m-4"},R=Object(i["h"])("i",{class:"fas fa-bullseye"},null,-1),C={class:"col-8"},F={id:"carouselExampleIndicators",class:"carousel slide","data-bs-ride":"carousel","data-bs-interval":"false"},B={style:{position:"fixed","margin-bottom":"0px",width:"51%"},class:"carousel-indicators"},N=Object(i["h"])("button",{type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":"0",class:"active"},null,-1),_=["data-bs-slide-to"],z={class:"carousel-inner"},L={class:"row col-12"},W=["onClick"],V={id:"shop"},K={class:"card text-dark"},A={class:"card card-header p-0"},J={class:"card card-body"},U={class:"mt-5"},G={class:"row"},D={class:"col-6 text-center p-0"},q={class:"col-6 text-center p-0"},$={class:"row"},Y={class:"col-6 text-center p-0"},X={class:"col-6 text-center p-0"},Q=Object(i["i"])('<button style="margin-left:-110px;" class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button style="margin-right:-90px;" class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button>',2),Z={class:"d-flex justify-content-center col-3"},ee={id:"towermenu"},te={key:0,class:"card text-dark"},ne={class:"card card-header p-0"},ie={class:"card card-body pb-1"},re={class:"d-flex justify-content-between"},ce=Object(i["j"])(" sell Tower "),oe={style:{color:"rgb(0, 230, 0)"}},ae=Object(i["h"])("i",{class:"fas fa-coins"},null,-1),se=Object(i["j"])(" upgrade Tower "),le=Object(i["h"])("i",{class:"fas fa-coins"},null,-1),de={class:"row col-12"},ue={class:"col-6"},he={class:"col-6",style:{color:"rgb(0, 230, 0)"}},pe={class:"col-6"},be={class:"col-6",style:{color:"rgb(0, 230, 0)"}},fe={class:"col-6"},ve={class:"col-6",style:{color:"rgb(0, 230, 0)"}},ge={key:0},je={class:"d-flex justify-content-center"},Oe=Object(i["j"])(" target: "),me=["value"],ye={key:1};function we(e,t,n,r,c,o){return Object(i["v"])(),Object(i["g"])("div",{id:"game",style:{height:"100vh",position:"relative"},onClick:t[10]||(t[10]=Object(i["L"])((function(t){return e.selectedTileIndices=null}),["stop"]))},[Object(i["h"])("div",h,[Object(i["h"])("div",{class:"button",onClick:t[0]||(t[0]=function(t){return e.reset()})},"reset"),Object(i["h"])("div",{class:"button",onClick:t[1]||(t[1]=function(t){return e.gameLoop()})},"step"),Object(i["h"])("div",{class:"button",onClick:t[2]||(t[2]=function(t){return e.visible=!e.visible})},"visibility"),Object(i["h"])("div",{class:"button",onClick:t[3]||(t[3]=function(t){return e.gameStarted=!e.gameStarted})},Object(i["E"])(e.gameStarted?"pause":"play"),1),Object(i["h"])("div",{class:"button",onClick:t[4]||(t[4]=function(t){return e.autospawn=!e.autospawn})},Object(i["E"])(e.autospawn?"autospawn":"no autospawn"),1),Object(i["h"])("div",{class:"button",onClick:t[5]||(t[5]=function(t){e.gamelooptick=0,e.waveSpawn=!0})},"Next Wave")]),Object(i["h"])("div",null,[e.visible?(Object(i["v"])(),Object(i["g"])("div",p,[Object(i["h"])("div",b,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(e.field,(function(t,n){return Object(i["v"])(),Object(i["g"])("div",{class:"offsetRow",key:JSON.stringify(t)},[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(t,(function(t,r){var c,o,a,s;return Object(i["v"])(),Object(i["g"])("div",{key:t.indices.join("|"),onClick:Object(i["L"])((function(t){return e.selectedTileIndices=[n,r]}),["stop"])},[Object(i["h"])("div",{class:Object(i["q"])(["hex field",t.type]),style:Object(i["r"])({"--hex-color":e.TERRAIN[t.type].color}),id:n+"|"+r,tabindex:"0"},[e.field[n][r].tower?(Object(i["v"])(),Object(i["g"])("div",{key:0,class:Object(i["q"])(["hex tower",null===(c=t.tower)||void 0===c?void 0:c.type]),style:Object(i["r"])({"--hex-color":null===(o=t.tower)||void 0===o?void 0:o.color}),id:n+"|"+r,tabindex:"0"},[(Object(i["v"])(),Object(i["e"])(i["b"],{to:"#polylineContainer"},[null!==(a=t.tower)&&void 0!==a&&a.target?(Object(i["v"])(),Object(i["g"])("polyline",{key:0,points:"".concat(e.getPosition(n,r).join(", ")," ").concat(null===(s=e.getEnemyPosition(t.tower.target))||void 0===s?void 0:s.join(", ")),fill:"none",stroke:"red"},null,8,j)):Object(i["f"])("",!0)]))],14,g)):Object(i["f"])("",!0)],14,v)],8,f)})),128))])})),128))])])):Object(i["f"])("",!0),(Object(i["v"])(),Object(i["g"])("svg",O,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(e.enemies,(function(e){return Object(i["v"])(),Object(i["g"])("circle",{key:JSON.stringify(e),cx:e.cords[0],cy:e.cords[1],r:e.size/2,fill:e.color},null,8,m)})),128)),e.visible?(Object(i["v"])(),Object(i["g"])(i["a"],{key:0},[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(e.enemies,(function(e){return Object(i["v"])(),Object(i["g"])("polyline",{key:JSON.stringify(e),points:"".concat(e.cords[0]-e.size-1,",").concat(e.cords[1]-e.size," ").concat(e.cords[0]+e.size+1,",").concat(e.cords[1]-e.size),fill:"none",stroke:"black","stroke-width":"5px"},null,8,y)})),128)),(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(e.enemies,(function(e){return Object(i["v"])(),Object(i["g"])("polyline",{key:JSON.stringify(e),points:"".concat(e.cords[0]-e.size,",").concat(e.cords[1]-e.size," ").concat(e.cords[0]-e.size+2*e.size*e.HP/e.maxHP,",").concat(e.cords[1]-e.size),fill:"none",stroke:"red","stroke-width":"3px"},null,8,w)})),128))],64)):Object(i["f"])("",!0),e.selectedTileIndices&&e.selectedTower?(Object(i["v"])(),Object(i["g"])("circle",{key:1,cx:e.getPosition(e.selectedTileIndices[0],e.selectedTileIndices[1])[0],cy:e.getPosition(e.selectedTileIndices[0],e.selectedTileIndices[1])[1],r:e.selectedTower.range,fill:"rgba(255, 0, 30, 0.13)",stroke:e.selectedTower.color},null,8,x)):Object(i["f"])("",!0)]))]),Object(i["h"])("div",k,[Object(i["h"])("div",P,[Object(i["h"])("div",T,[Object(i["h"])("div",E,[Object(i["j"])(Object(i["E"])(Math.round(e.player.gold))+" ",1),S]),Object(i["h"])("div",M,[Object(i["j"])(Object(i["E"])(e.player.hp)+" ",1),H]),Object(i["h"])("div",I,[Object(i["j"])(Object(i["E"])(e.wave)+" ",1),R])]),Object(i["h"])("div",C,[Object(i["h"])("div",F,[Object(i["h"])("div",B,[N,(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(Math.ceil((Object.values(e.TOWER_OPTIONS).length-4)/4),(function(e){return Object(i["v"])(),Object(i["g"])("button",{key:JSON.stringify(e),type:"button","data-bs-target":"#carouselExampleIndicators","data-bs-slide-to":e},null,8,_)})),128))]),Object(i["h"])("div",z,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(Object.values(e.TOWER_OPTIONS).chunk(4),(function(t,n){return Object(i["v"])(),Object(i["g"])("div",{class:Object(i["q"])(["carousel-item",{active:0==n}]),key:n},[Object(i["h"])("div",L,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(t,(function(t){return Object(i["v"])(),Object(i["g"])("div",{key:t.type,class:"col-3"},[Object(i["h"])("div",{onClick:Object(i["L"])((function(n){return e.buildTower(e.selectedTileIndices,t)}),["stop"])},[Object(i["h"])("div",V,[Object(i["h"])("div",K,[Object(i["h"])("div",A,Object(i["E"])(t.type),1),Object(i["h"])("div",J,[Object(i["h"])("div",{class:Object(i["q"])(["hex tower",t.type]),style:Object(i["r"])([{"--hex-color":t.color},{"margin-left":"47%"}])},null,6),Object(i["h"])("div",U,"hotKey:"+Object(i["E"])(t.shortcut),1),Object(i["h"])("div",G,[Object(i["h"])("div",D,"price:"+Object(i["E"])(t.price),1),Object(i["h"])("div",q,"range:"+Object(i["E"])(t.range),1)]),Object(i["h"])("div",$,[Object(i["h"])("div",Y,"attackspeed:"+Object(i["E"])(t.atkspeed),1),Object(i["h"])("div",X,"atk:"+Object(i["E"])(t.atk),1)])])])])],8,W)])})),128))])],2)})),128))]),Q])]),Object(i["h"])("div",Z,[Object(i["h"])("div",ee,[e.selectedTower?(Object(i["v"])(),Object(i["g"])("div",te,[Object(i["h"])("div",ne,Object(i["E"])(e.selectedTower.type),1),Object(i["h"])("div",ie,[Object(i["h"])("div",null,[Object(i["h"])("div",re,[Object(i["h"])("button",{class:"btn btn-danger w-50 me-2 d-flex justify-content-center",type:"button",onClick:t[6]||(t[6]=Object(i["L"])((function(t){return e.sell(e.selectedTower)}),["stop"]))},[ce,Object(i["h"])("div",oe,[Object(i["j"])("  "+Object(i["E"])(Math.floor(e.selectedTower.totalValue/2))+" ",1),ae])]),Object(i["h"])("button",{class:"btn btn-success w-50 ms-2 d-flex justify-content-center",type:"button",onClick:t[7]||(t[7]=Object(i["L"])((function(t){return e.upgrade(e.selectedTower,Math.floor(.3*e.selectedTower.totalValue),1.04)}),["stop"]))},[se,Object(i["h"])("div",{style:Object(i["r"])({color:e.player.gold>=Math.floor(.3*e.selectedTower.totalValue)?"rgb(0, 230, 0)":"rgb(255, 0, 21)"})},[Object(i["j"])("  "+Object(i["E"])(Math.floor(.3*e.selectedTower.totalValue))+" ",1),le],4)])]),Object(i["h"])("div",de,[Object(i["h"])("div",ue,"dmg/atttack: "+Object(i["E"])(e.selectedTower.atk.toFixed(2)),1),Object(i["h"])("div",he,"+"+Object(i["E"])((.04*e.selectedTower.atk).toFixed(2)),1),Object(i["h"])("div",pe,"attacks/s: "+Object(i["E"])(e.selectedTower.atkspeed.toFixed(2)),1),Object(i["h"])("div",be,"+"+Object(i["E"])((.04*e.selectedTower.atkspeed).toFixed(2)),1),Object(i["h"])("div",fe,"range: "+Object(i["E"])(e.selectedTower.range.toFixed(2)),1),Object(i["h"])("div",ve,"+"+Object(i["E"])((.04*e.selectedTower.range).toFixed(2)),1)]),e.selectedTower&&"bank"!==e.selectedTower.type?(Object(i["v"])(),Object(i["g"])("div",ge,[Object(i["h"])("div",null,"dmg dealt: "+Object(i["E"])(Math.floor(e.selectedTower.dmgDealt)),1),Object(i["h"])("div",je,[Oe,Object(i["h"])("div",{onClick:t[9]||(t[9]=Object(i["L"])((function(){}),["stop"]))},[Object(i["K"])(Object(i["h"])("select",{"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.selectedTower.filter=t})},[(Object(i["v"])(),Object(i["g"])(i["a"],null,Object(i["B"])(["first","last","closest","mostHealthy","mostWounded","slowest","fastest"],(function(e){return Object(i["h"])("option",{key:e,value:e},Object(i["E"])(e),9,me)})),64))],512),[[i["G"],e.selectedTower.filter]])])])])):Object(i["f"])("",!0),"bank"==e.selectedTower.type?(Object(i["v"])(),Object(i["g"])("div",ye,[Object(i["h"])("div",null,"gold earned: "+Object(i["E"])(Math.floor(e.selectedTower.dmgDealt)),1)])):Object(i["f"])("",!0)])])])):Object(i["f"])("",!0)])])])])])}var xe=n("2909"),ke=n("5530"),Pe=n("3835"),Te=n("b85c"),Ee=(n("fb6a"),n("d81d"),n("0481"),n("4069"),n("159b"),n("c740"),n("7db0"),5),Se=(n("c1f9"),n("4fad"),{sniper:{atk:30,range:300,atkspeed:1,price:25,totalValue:25,buildingFields:["forest","hill","grass"],color:"hsl(0, 50%, 60%)",shortcut:"1"},ballista:{atk:10,range:75,atkspeed:3,price:25,totalValue:25,buildingFields:["forest","hill","grass"],color:"hsl(318, 99%, 36%)",shortcut:"2"},laser:{atk:3,range:100,atkspeed:10,price:25,totalValue:25,buildingFields:["forest","hill","grass"],color:"hsl(303, 50%, 70%)",shortcut:"3"},canonship:{atk:15,range:150,atkspeed:2,price:25,totalValue:25,buildingFields:["water"],color:"hsl(32, 60%, 28%)",shortcut:"4"},bank:{atk:0,range:0,atkspeed:0,price:100,totalValue:100,buildingFields:["grass"],color:"hsl(59, 100%, 59%)",shortcut:"5"},freezer:{atk:10,range:100,atkspeed:2,price:30,totalValue:30,buildingFields:["forest","hill","grass"],color:"hsl(221, 100%, 67%)",shortcut:"6"}}),Me=Object.fromEntries(Object.entries(Se).map((function(e){var t=Object(Pe["a"])(e,2),n=t[0],i=t[1];return[n,Object(ke["a"])(Object(ke["a"])({},i),{},{type:n})]})));function He(e,t){return"number"==typeof t?[e[0]+t,e[1]+t]:[e[0]+t[0],e[1]+t[1]]}function Ie(e,t){return"number"==typeof t?[e[0]-t,e[1]-t]:[e[0]-t[0],e[1]-t[1]]}function Re(e,t){return"number"==typeof t?[e[0]/t,e[1]/t]:[e[0]/t[0],e[1]/t[1]]}function Ce(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function Fe(e){return Math.pow(e[0],2)+Math.pow(e[1],2)}console.log(Ee),Object.defineProperty(Array.prototype,"chunk",{value:function(e){for(var t=[],n=0;n<this.length;n+=e)t.push(this.slice(n,n+e));return t}});var Be={hill:{atk:1,atkspeed:1,range:1.2,color:"hsl(93, 22%, 67%)"},water:{atk:1,atkspeed:1,range:1,color:"hsl(202, 50%, 60%)"},forest:{atk:1,atkspeed:.8,range:.9,color:"hsl(125, 36%, 35%)"},grass:{atk:1,atkspeed:1,range:1,color:"hsl(135, 50%, 60%)"},path:{atk:0,atkspeed:0,range:0,color:"hsl(39, 50%, 60%) "}},Ne={red:{maxHP:75,HP:75,baseSpeed:1,speed:1},orange:{maxHP:200,HP:200,baseSpeed:1,speed:1},yellow:{maxHP:500,HP:500,baseSpeed:1,speed:1},green:{maxHP:1e3,HP:1e3,baseSpeed:1,speed:1},blue:{maxHP:2e3,HP:2e3,baseSpeed:1,speed:1},purple:{maxHP:5e3,HP:5e3,baseSpeed:1,speed:1}},_e=Object(i["l"])({setup:function(){return{TOWER_OPTIONS:Me,TERRAIN:Be}},data:function(){return{ticks:60,visible:!0,player:{gold:100,hp:100},hexagonSize:50,fieldWidth:32,fieldHeight:12,field:[],counter:0,path:[],enemies:[],gameStarted:!1,gamelooptick:0,wave:0,waveSpawn:!0,autospawn:!1,spawned:0,selectedTileIndices:null,bonus:!1,shopSize:20,shopPosition:{left:0,top:0,position:[0,0]},pressedKeys:{}}},mounted:function(){var e=this;this.createField(),this.startGame(),document.addEventListener("keyup",(function(t){return"Space"==t.code&&(e.gameStarted=!e.gameStarted)}))},computed:{selectedTile:function(){return this.selectedTileIndices?this.field[this.selectedTileIndices[0]][this.selectedTileIndices[1]]:null},towers:function(){return this.field.flat().filter((function(e){return e.tower})).map((function(e){return e.tower}))},selectedTower:function(){var e,t;return null!==(e=null===(t=this.selectedTile)||void 0===t?void 0:t.tower)&&void 0!==e?e:null},banks:function(){return this.towers.filter((function(e){return"bank"==e.type}))}},methods:{reset:function(){this.gameStarted=!1,this.autospawn=!1,this.gamelooptick=0,this.wave=0,this.player.gold=100,this.player.hp=100,this.field=[],this.enemies=[],this.path=[],this.createField()},createField:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,i,r,c,o,a,s,l,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.field=[],n=0;n<e.fieldWidth;n++){for(i=[],r=0;r<e.fieldHeight;r++)c=e.getRandomInt(50),0==c&&i.push({color:"#005000",type:"forest",indices:[n,r],rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}}),1!=c&&2!=c||i.push({color:"#0000CC",type:"water",indices:[n,r],rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}}),3!=c&&4!=c||i.push({color:"#754c00",type:"hill",indices:[n,r],rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}}),c>4&&i.push({color:"#008000",type:"grass",indices:[n,r],rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}});e.field.push(i)}return t.next=4,e.generatePath("basic");case 4:o=Object(Te["a"])(e.field);try{for(o.s();!(a=o.n()).done;){s=a.value,l=Object(Te["a"])(s);try{for(l.s();!(d=l.n()).done;)u=d.value,u.rect=document.getElementById("".concat(u.indices[0],"|").concat(u.indices[1])).getBoundingClientRect()}catch(h){l.e(h)}finally{l.f()}}}catch(h){o.e(h)}finally{o.f()}case 6:case"end":return t.stop()}}),t)})))()},generatePath:function(e){this.clearPath();var t=[0,this.getRandomInt(this.fieldHeight-1)],n=t[0],i=t[1];this.path=[],this.path.push(this.pathfield([n,i],!0,!1));var r=[];switch(e){case"basic":this.field[n][i]=this.pathfield([n,i],!0,!1);while(n<this.fieldWidth-2){switch(this.getRandomInt(2)){case 0:n%2==0&&i++,i==this.fieldHeight&&i--;break;case 1:n%2!=0&&i--,i<0&&i++;break}n++,this.field[n][i]=this.pathfield([n,i],!1,!1),this.path.push(this.pathfield([n,i],!1,!1))}this.field[n+1][i]=this.pathfield([n+1,i],!1,!0),this.path.push(this.pathfield([n+1,i],!1,!0));break;case"complex":this.field[n][i]=this.pathfield([n,i],!0,!1);while(n<this.fieldWidth-1){var c=[];r=this.findNeighbourFields(n,i,"grass");var o,a=Object(Te["a"])(r);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=s.indices,d=this.findNeighbourFields(l[0],l[1],"path");1==d.length&&c.push(s)}}catch(f){a.e(f)}finally{a.f()}if(0==c.length)break;var u=this.getRandomInt(c.length-1),h=c[u],p=h.indices;this.field[p[0]][p[1]]=this.pathfield(p,!1,!1),this.path.push(this.pathfield(p,!1,!1));var b=Object(Pe["a"])(p,2);n=b[0],i=b[1]}}},clearPath:function(){var e=this;this.path=[],this.field.forEach((function(t,n){return t.forEach((function(t,i){"path"==t.type&&(e.field[n][i]={indices:t.indices,type:"grass",color:"135, 50%, 60%",rect:t.rect})}))}))},findNeighbourFields:function(e,t,n){var i=[{dir:"up",x:0,y:-1},{dir:"down",x:0,y:1},{dir:"upright",x:1,y:0},{dir:"downright",x:1,y:1},{dir:"upleft",x:-1,y:0},{dir:"downleft",x:-1,y:1}],r=[{dir:"up",x:0,y:-1},{dir:"down",x:0,y:1},{dir:"upright",x:1,y:-1},{dir:"downright",x:1,y:0},{dir:"upleft",x:-1,y:-1},{dir:"downleft",x:-1,y:0}],c=[];c=e%2==0?i:r;var o,a=[],s=Object(Te["a"])(c);try{for(s.s();!(o=s.n()).done;){var l=o.value,d=e+l.x,u=t+l.y;d<0||u<0||d>this.fieldWidth-1||u>this.fieldHeight-1||this.field[d][u].type!=n||a.push(this.field[d][u])}}catch(h){s.e(h)}finally{s.f()}return a},testSetup:function(){this.clearPath(),this.wave=1e4;for(var e=0,t=0;t<this.wave;t++)e+=10*Math.pow(t,.5)*t;this.player.gold=e;for(var n=0;n<this.fieldWidth;n++)this.field[n][7]=this.pathfield([n,7],!1,!1),this.path.push(this.pathfield([n,7],!1,!1));for(var i=0;i<this.fieldWidth;i++)this.buildTower([i,8],Me["laser"]);for(var r=0;r<this.fieldWidth;r++)this.buildTower([r,6],Me["laser"]);var c,o=Object(Te["a"])(this.field);try{for(o.s();!(c=o.n()).done;){var a,s=c.value,l=Object(Te["a"])(s);try{for(l.s();!(a=l.n()).done;){var d=a.value;d.rect=document.getElementById("".concat(d.indices[0],"|").concat(d.indices[1])).getBoundingClientRect()}}catch(u){l.e(u)}finally{l.f()}}}catch(u){o.e(u)}finally{o.f()}},startGame:function(){var e=this;window.onkeyup=function(t){e.pressedKeys[t.key]=!1},window.onkeydown=function(t){e.pressedKeys[t.key]=!0},setInterval((function(){e.gameStarted&&e.gameLoop(),e.selectedTile&&e.building()}),1e3/this.ticks)},gameLoop:function(){this.checkEntities(),this.movement(),this.towerAction(),this.spawnWave(),this.gamelooptick++},spawnWave:function(){if(this.waveSpawn){var e=Math.floor(5*Math.pow(this.wave,.5));if(this.gamelooptick%(this.ticks/Math.pow(this.wave,.5))<1){var t=this.getRandomInt(this.wave);t<5&&(this.createEnemy("red"),this.spawned++),5<=t&&t<10&&(this.createEnemy("orange"),this.spawned+=1.5),10<=t&&t<20&&(this.createEnemy("yellow"),this.spawned+=2.5),20<=t&&t<50&&(this.createEnemy("green"),this.spawned+=5),50<=t&&t<100&&(this.createEnemy("blue"),this.spawned+=10),100<=t&&t<250&&(this.createEnemy("purple"),this.spawned+=15)}e<=this.spawned&&(this.waveSpawn=!1,this.spawned=0)}},building:function(){var e;if(void 0==(null===(e=this.selectedTile)||void 0===e?void 0:e.tower))for(var t=0,n=Object.values(Me);t<n.length;t++){var i=n[t];this.pressedKeys[i.shortcut]&&this.buildTower(this.selectedTileIndices,i)}},movement:function(){this.moveEnemy()},checkEntities:function(){this.checkEnemyLife()},towerAction:function(){var e,t=this,n=Object(Te["a"])(this.towers.filter((function(e){return t.gamelooptick%(t.ticks/e.atkspeed)<1})));try{for(n.s();!(e=n.n()).done;){var i=e.value;this.getTowerTarget(i),this.towerAttack(i)}}catch(r){n.e(r)}finally{n.f()}},createEnemy:function(e){var t=Object(ke["a"])(Object(ke["a"])({},Ne[e]),{},{cords:this.getPosition.apply(this,Object(xe["a"])(this.path[0].indices)),id:JSON.stringify(Math.random()),slowduration:0,distanceTravelled:0,size:16,nextPathNumber:1,color:e});this.enemies.push(t)},checkEnemyLife:function(){this.player.gold+=this.enemies.filter((function(e){return e.HP<=0})).reduce((function(e,t){return e+t.maxHP/75}),0),this.enemies=this.enemies.filter((function(e){return e.HP>0})),0==this.enemies.length&&(this.autospawn||this.waveSpawn)&&(this.gamelooptick=0,this.waveSpawn=!0,this.wave++,this.bankBonus())},moveEnemy:function(){var e,t=Object(Te["a"])(this.enemies);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.nextPathNumber<this.path.length){var i=this.getPosition.apply(this,Object(xe["a"])(this.path[n.nextPathNumber].indices)),r=Ie(i,n.cords);n.slowduration>0?(n.slowduration--,n.speed=.4*n.baseSpeed):n.speed=n.baseSpeed,n.cords=He(n.cords,Re(r,Ce(r)/n.speed)),n.distanceTravelled+=Ce(Re(r,Ce(r)/n.speed)),Fe(Ie(n.cords,i))<Math.pow(n.speed,2)&&n.nextPathNumber++}else this.survivedEnemy(n)}}catch(c){t.e(c)}finally{t.f()}},survivedEnemy:function(e){this.player.hp--,this.enemies=this.enemies.filter((function(t){return t!==e}))},bankBonus:function(){var e;if(null!==(e=this.banks)&&void 0!==e&&e.length){var t=0;t=.01*this.player.gold,t>100&&(t=100),this.player.gold+=t*this.banks.length;var n,i=Object(Te["a"])(this.banks);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.dmgDealt+=t}}catch(c){i.e(c)}finally{i.f()}}},buildTower:function(e,t){var n=this;if(t&&!(this.player.gold-Me[t.type].price<0)&&t.buildingFields.some((function(t){return t==n.field[e[0]][e[1]].type}))){var i=Be[this.field[e[0]][e[1]].type],r=this.tower([e[0],e[1]],t);r.atk*=i.atk,r.atkspeed*=i.atkspeed,r.range*=i.range,this.field[e[0]][e[1]].tower=r,this.player.gold-=r.price}},sell:function(e){this.player.gold+=Math.floor(e.totalValue/2),this.field[e.indices[0]][e.indices[1]].tower=void 0},upgrade:function(e,t,n){if(!(this.player.gold-t<0)){for(var i=0,r=["atk","atkspeed","range"];i<r.length;i++){var c=r[i];e[c]*=n}e.level++,e.totalValue+=t,this.player.gold-=t}},tower:function(e,t){return Object(ke["a"])(Object(ke["a"])({},Me[t.type]),{},{indices:e,target:null,filter:"first",level:1,dmgDealt:0})},getTowerTarget:function(e){var t,n,i,r=this.field[e.indices[0]][e.indices[1]].rect,c=null,o=this.middlePointRect(r),a=Object(Te["a"])(this.enemies.filter((function(e){return e.HP>0})));try{for(a.s();!(i=a.n()).done;){var s=i.value,l=Ie(s.cords,s.size/2);if(Fe(Ie(o,l))<Math.pow(e.range,2))switch(e.filter){default:case"first":(null==c||s.distanceTravelled>c.distanceTravelled)&&(c=s);break;case"last":(null==c||s.distanceTravelled<c.distanceTravelled)&&(c=s);break;case"closest":(null==c||Fe(Ie(o,l))<Fe(Ie(o,Ie(c.cords,c.size/2))))&&(c=s);break;case"mostHealthy":(null==c||s.HP>c.HP)&&(c=s);break;case"mostWounded":(null==c||s.HP<c.HP)&&(c=s);break;case"slowest":(null==c||s.speed<c.speed)&&(c=s);break;case"fastest":(null==c||s.speed>c.speed)&&(c=s);break}}}catch(d){a.e(d)}finally{a.f()}this.field[e.indices[0]][e.indices[1]].tower.target=null!==(t=null===(n=c)||void 0===n?void 0:n.id)&&void 0!==t?t:null},towerAttack:function(e){var t=this.enemies[this.enemies.findIndex((function(t){return t.id==e.target}))];t&&(t.HP-=e.atk,e.dmgDealt+=e.atk,t.HP<0&&(t.HP=0),"canonship"==e.type?this.enemies.filter((function(e){return Fe(Ie(e.cords,t.cords))<Math.pow(100,2)})).forEach((function(t){return t.HP-=.6*e.atk})):"freezer"==e.type&&(t.slowduration+=45))},getPosition:function(e,t){return this.middlePointRect(this.field[e][t].rect)},getEnemyPosition:function(e){var t=this.enemies.find((function(t){return t.id==e}));if(t)return t.cords},pathfield:function(e,t,n){return{color:"39, 50%, 60%",type:"path",indices:e,start:t,finish:n,rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}}},middlePointRect:function(e){return[e.left+.5*e.width,e.top+.5*e.height]},getRandomInt:function(e){return Math.floor(Math.random()*e)}}});const ze=o()(_e,[["render",we]]);var Le=ze,We=function(e){return Object(i["y"])("data-v-46c2c456"),e=e(),Object(i["w"])(),e},Ve={class:"d-flex mx-5 justify-content-around"},Ke=Object(i["j"])(" gold: "),Ae=Object(i["j"])(" FieldWidth: "),Je=Object(i["j"])(" FieldHeight: "),Ue=Object(i["j"])(" MinPathLength: "),Ge=["max"],De=We((function(){return Object(i["h"])("button",{class:"btn btn-success ms-1",type:"submit"},"save map",-1)})),qe={class:"row col-12"},$e=Object(i["i"])('<div class="d-flex flex-column mt-5 p-0" style="width:7%;" data-v-46c2c456><ul style="list-style-type:none;" class="ms-4 p-0" data-v-46c2c456><li class="d-flex" data-v-46c2c456><div style="width:30px;height:20px;background-color:#555555;" data-v-46c2c456></div><p class="ms-3" data-v-46c2c456>Path</p></li><li class="d-flex" data-v-46c2c456><div style="width:30px;height:20px;background-color:green;" data-v-46c2c456></div><p class="ms-3" data-v-46c2c456>grass</p></li><li class="d-flex" data-v-46c2c456><div style="width:30px;height:20px;background-color:blue;" data-v-46c2c456></div><p class="ms-3" data-v-46c2c456>Water</p></li><li class="d-flex" data-v-46c2c456><div style="width:30px;height:20px;background-color:rgb(117, 76, 0);" data-v-46c2c456></div><p class="ms-3" data-v-46c2c456>Hill</p></li><li class="d-flex" data-v-46c2c456><div style="width:30px;height:20px;background-color:black;" data-v-46c2c456></div><p class="ms-3" data-v-46c2c456>Fill</p></li><li class="d-flex" data-v-46c2c456><div style="width:30px;height:20px;background-color:black;" data-v-46c2c456></div><p class="ms-3" data-v-46c2c456>Fill</p></li></ul></div>',1),Ye={class:"d-flex mt-5",style:{width:"93%"}},Xe=["id","onClick"],Qe={key:0},Ze=["onClick"],et={id:"shop"},tt={class:"card w-100 text-dark"},nt={class:"card card-header"},it=We((function(){return Object(i["h"])("div",{class:"card card-body"},null,-1)}));function rt(e,t,n,r,c,o){var a=Object(i["C"])("Navbar");return Object(i["v"])(),Object(i["g"])(i["a"],null,[Object(i["k"])(a),Object(i["h"])("div",{onClick:t[13]||(t[13]=function(t){return e.shopShow=!1}),class:"flex-1",style:{height:"100vh"}},[Object(i["h"])("div",Ve,[Object(i["h"])("div",null,[Ke,Object(i["K"])(Object(i["h"])("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.player.gold=t})},null,512),[[i["H"],e.player.gold]])]),Object(i["h"])("div",null,[Ae,Object(i["K"])(Object(i["h"])("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fieldWidth=t}),max:"50",min:"3",onChange:t[2]||(t[2]=function(t){return e.renderField("clear")})},null,544),[[i["H"],e.fieldWidth]])]),Object(i["h"])("div",null,[Je,Object(i["K"])(Object(i["h"])("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.fieldHeight=t}),max:"20",min:"3",onChange:t[4]||(t[4]=function(t){return e.renderField("clear")})},null,544),[[i["H"],e.fieldHeight]])]),Object(i["h"])("div",null,[Ue,Object(i["K"])(Object(i["h"])("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.pathLength=t}),max:e.fieldHeight*e.fieldWidth/3,min:"0",onChange:t[6]||(t[6]=function(t){return e.generatePath("complex")})},null,40,Ge),[[i["H"],e.pathLength]])]),Object(i["h"])("button",{class:"btn btn-info mb-1 ms-2",type:"button",onClick:t[7]||(t[7]=Object(i["L"])((function(t){return e.generatePath("basic")}),["stop"]))},"Auto generate basic path"),Object(i["h"])("button",{class:"btn btn-info mb-1 ms-2",type:"button",onClick:t[8]||(t[8]=Object(i["L"])((function(t){return e.generatePath("complex")}),["stop"]))},"Auto generate complex path"),Object(i["h"])("button",{class:"btn btn-info mb-1 ms-2",onClick:t[9]||(t[9]=Object(i["L"])((function(t){return e.renderField("clear")}),["stop"]))},"clear"),Object(i["h"])("button",{class:"btn btn-info mb-1 ms-2",onClick:t[10]||(t[10]=Object(i["L"])((function(t){return e.renderField("pathClear")}),["stop"]))},"pathClear"),Object(i["h"])("form",{onSubmit:t[12]||(t[12]=Object(i["L"])((function(t){return e.saveMap()}),["prevent"]))},[Object(i["K"])(Object(i["h"])("input",{type:"text",required:"","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.mapName=t}),placeholder:"mapName"},null,512),[[i["H"],e.mapName]]),De],32)]),Object(i["h"])("div",qe,[$e,Object(i["h"])("div",Ye,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(e.field,(function(t,n){return Object(i["v"])(),Object(i["g"])("div",{key:JSON.stringify(t),style:Object(i["r"])({marginTop:n%2==0?"".concat(20,"px"):"0px"})},[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(t,(function(t,r){return Object(i["v"])(),Object(i["g"])("div",{key:JSON.stringify(t),style:Object(i["r"])({color:null===t||void 0===t?void 0:t.color,fontSize:"".concat(e.hexagonSize,"px")}),class:"hex",id:n+"|"+r,onClick:Object(i["L"])((function(t){return e.openBuildMenu(n,r,t)}),["stop"])},null,12,Xe)})),128))],4)})),128))])]),Object(i["h"])("div",null,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(e.Options,(function(t){return Object(i["v"])(),Object(i["g"])("div",{key:t.type},[e.shopShow?(Object(i["v"])(),Object(i["g"])("div",Qe,[Object(i["h"])("div",{onClick:Object(i["L"])((function(n){return e.changeHex(e.shopPosition.position[0],e.shopPosition.position[1],t.type)}),["stop"]),style:Object(i["r"])({backgroundColor:t.color})},[Object(i["h"])("div",et,[Object(i["h"])("div",tt,[Object(i["h"])("div",nt,Object(i["E"])(t.type),1),it])])],12,Ze)])):Object(i["f"])("",!0)])})),128))])])],64)}var ct={id:"nav"},ot=Object(i["j"])("Game"),at=Object(i["j"])(" | "),st=Object(i["j"])("MapBuilder");function lt(e,t){var n=Object(i["C"])("router-link");return Object(i["v"])(),Object(i["g"])("div",ct,[Object(i["k"])(n,{to:"/game"},{default:Object(i["J"])((function(){return[ot]})),_:1}),at,Object(i["k"])(n,{to:"/Mapbuilder"},{default:Object(i["J"])((function(){return[st]})),_:1})])}const dt={},ut=o()(dt,[["render",lt]]);var ht=ut,pt=(n("b0c0"),n("e71f")),bt=n("ea7b");function ft(e,t){return vt.apply(this,arguments)}function vt(){return vt=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(bt["b"])(),e.next=3,Object(bt["d"])(i,t,n);case 3:case"end":return e.stop()}}),e)}))),vt.apply(this,arguments)}function gt(e,t){return jt.apply(this,arguments)}function jt(){return jt=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(bt["b"])(),e.next=3,Object(bt["a"])(i,t,n);case 3:return r=e.sent,e.next=6,Object(pt["e"])(Object(pt["c"])(Object(pt["d"])(),"users",r.user.uid),{email:t});case 6:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function Ot(e){return mt.apply(this,arguments)}function mt(){return mt=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null===(n=On.value)||void 0===n?void 0:n.uid,e.next=3,Object(pt["a"])(Object(pt["b"])(Object(pt["d"])(),"maps"),{name:t.name,field:t.field,creator:i});case 3:case"end":return e.stop()}}),e)}))),mt.apply(this,arguments)}var yt=Object(i["l"])({components:{Navbar:ht},data:function(){return{mouse:{vector:[0,0]},player:{gold:100},field:[],mapName:"",hexagonSize:50,fieldWidth:30,fieldHeight:15,path:[],pathLength:30,counter:0,generating:!1,shopSize:20,shopShow:!1,shopPosition:{left:0,top:0,position:[0,0]},Options:[{type:"path",color:"#555555"},{type:"water",color:"#0000FF"},{type:"hill",color:"#754c00"},{type:"grass",color:"#008000"}]}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.renderField("clear"),e.counter=0;case 2:case"end":return t.stop()}}),t)})))()},methods:{renderField:function(e){switch(e){case"clear":this.field=[];for(var t=0;t<this.fieldWidth;t++){for(var n=[],i=0;i<this.fieldHeight;i++)n.push({color:"#008000",type:"grass",indices:[t,i],rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}});this.field.push(n)}break;case"pathClear":for(var r=0;r<this.fieldWidth;r++)for(var c=0;c<this.fieldHeight;c++)"path"==this.field[r][c].type&&(this.field[r][c]={indices:[r,c],type:"grass",color:"#008000",rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}});break}},massGenerate:function(){for(var e=0;e<50;e++)this.generatePath("basic",!1)},generatePath:function(e,t){var n=this;return Object(d["a"])(regeneratorRuntime.mark((function i(){var r,c,o,a,s,l,d,u,h,p,b;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=[0,n.getRandomInt(n.fieldHeight-1)],n.path=[],n.path.push(n.pathfield(r,!0,!1)),c=[],i.t0=e,i.next="basic"===i.t0?7:"complex"===i.t0?25:46;break;case 7:!1!==t&&n.renderField("pathClear"),n.field[r[0]][r[1]]=n.pathfield(r,!0,!1);case 9:if(!(r[0]<n.fieldWidth-2)){i.next=23;break}i.t1=n.getRandomInt(2),i.next=0===i.t1?13:1===i.t1?16:19;break;case 13:return r[0]%2==0&&r[1]++,r[1]==n.fieldHeight&&r[1]--,i.abrupt("break",19);case 16:return r[0]%2!=0&&r[1]--,r[1]<0&&r[1]++,i.abrupt("break",19);case 19:r[0]++,n.field[r[0]][r[1]]=n.pathfield(r,!1,!1),i.next=9;break;case 23:return n.field[r[0]+1][r[1]]=n.pathfield(r,!1,!0),i.abrupt("break",46);case 25:n.renderField("pathClear"),n.field[r[0]][r[1]]=n.pathfield(r,!0,!1),console.log({field:n.field});case 28:if(!(r[0]<n.fieldWidth-1)){i.next=45;break}o=[],c=n.findNeighbourFields(r[0],r[1],"grass"),console.log({grass:c}),a=Object(Te["a"])(c);try{for(a.s();!(s=a.n()).done;)l=s.value,d=n.getPathIndeces(l),u=n.findNeighbourFields(d[0],d[1],"path"),console.log({cords:d,path:u}),1==u.length&&o.push(l)}catch(f){a.e(f)}finally{a.f()}if(console.log({validPointerNeighbours:o}),0!=o.length){i.next=37;break}return i.abrupt("break",45);case 37:h=n.getRandomInt(o.length-1),p=o[h],b=n.getPathIndeces(p),n.field[b[0]][b[1]]=n.pathfield(b,!1,!1),n.path.push(n.pathfield(b,!1,!1)),r=b,i.next=28;break;case 45:n.path.length<n.pathLength&&n.counter<1e3&&(console.log("newPath"),n.counter++,n.generatePath("complex"));case 46:case"end":return i.stop()}}),i)})))()},applyPath:function(){var e=this;this.path.forEach((function(t){var n=e.pathfield(e.getPathIndeces(t),!0,!1);e.field[e.getPathIndeces(t)[0]][e.getPathIndeces(t)[1]]=n}))},findNeighbourFields:function(e,t,n){var i=[{dir:"up",x:0,y:-1},{dir:"down",x:0,y:1},{dir:"upright",x:1,y:0},{dir:"downright",x:1,y:1},{dir:"upleft",x:-1,y:0},{dir:"downleft",x:-1,y:1}],r=[{dir:"up",x:0,y:-1},{dir:"down",x:0,y:1},{dir:"upright",x:1,y:-1},{dir:"downright",x:1,y:0},{dir:"upleft",x:-1,y:-1},{dir:"downleft",x:-1,y:0}],c=[];c=e%2==0?i:r;var o,a=[],s=Object(Te["a"])(c);try{for(s.s();!(o=s.n()).done;){var l=o.value,d=e+l.x,u=t+l.y;console.log({targetX:d,targetY:u}),d<0||u<0||d>this.fieldWidth-1||u>this.fieldHeight-1||this.field[d][u].type!=n||a.push(this.field[d][u]),console.log({x:e,y:t,neighbour:l})}}catch(h){s.e(h)}finally{s.f()}return a},getPathIndeces:function(e){return null===e||void 0===e?void 0:e.indices},clearPath:function(){this.field.forEach((function(e,t){return e.forEach((function(e,n){"path"==e.type&&(e={indices:[t,n],type:"grass",color:"#008000",rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}})}))}))},openBuildMenu:function(e,t,n){this.shopShow=!0,this.mouse.vector=[n.pageX,n.pageY];var i=this.checkClickedField(e,t),r=document.getElementById("".concat(i[0],"|").concat(i[1])).getBoundingClientRect(),c=this.middlePointRect(r);c[0]-=this.shopSize/2+3,c[1]-=this.hexagonSize-this.shopSize/2-2,this.shopPosition.left=c[0],this.shopPosition.top=c[1],this.shopPosition.position=i},changeHex:function(e,t,n){this.field[e][t].type=n,this.field[e][t].color=this.Options.find((function(e){return e.type==n})).color},checkClickedField:function(e,t){if(this.checkField(e,t))return[e,t];if(e%2!=0){if(this.checkField(e,t-1))return[e,t-1];if(this.checkField(e-1,t-1))return[e-1,t-1]}else{if(this.checkField(e-1,t))return[e-1,t];if(this.checkField(e,t-1))return[e,t-1]}},checkField:function(e,t){if(!(t<0)&&!(e<0)){var n=document.getElementById("".concat(e,"|").concat(t)).getBoundingClientRect();return this.collisionsCheck(this.mouse.vector,this.middlePointRect(n),22,22)?[e,t]:void 0}},saveMap:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,i,r,c,o,a,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],i=Object(Te["a"])(e.field);try{for(i.s();!(r=i.n()).done;){c=r.value,o=Object(Te["a"])(c);try{for(o.s();!(a=o.n()).done;)s=a.value,n.push(s)}catch(d){o.e(d)}finally{o.f()}}}catch(d){i.e(d)}finally{i.f()}return console.log({field:n}),l={name:e.mapName,field:n,creator:""},t.prev=5,t.next=8,Ot(l);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](5),e.error("couldn't save map:".concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[5,10]])})))()},error:function(e){console.error(e)},pathfield:function(e,t,n){return{color:this.Options[0].color,type:"path",indices:e,start:t,finish:n,rect:{x:0,y:0,width:0,height:0,top:0,left:0,right:0,bottom:0}}},middlePointRect:function(e){return[e.left+.5*e.width,e.top+.5*e.height]},percent:function(e,t){return"in"==t?(e+100)/100:"de"==t?e<100?(100-e)/100:0:1},collisionsCheck:function(e,t,n,i){return Ce(Ie(e,t))<n/2+i/2},getRandomInt:function(e){return Math.round(Math.random()*e)}}});n("11d4");const wt=o()(yt,[["render",rt],["__scopeId","data-v-46c2c456"]]);var xt=wt,kt=function(e){return Object(i["y"])("data-v-7d279aa2"),e=e(),Object(i["w"])(),e},Pt={class:"container d-flex align-items-stretch justify-content-center flex-column",style:{height:"100vh"}},Tt={class:"card card-default w-75",style:{"margin-left":"12.5%"}},Et=kt((function(){return Object(i["h"])("div",{class:"card-header header"},"Registrierung",-1)})),St={class:"card-body"},Mt={key:0,class:"m-4 alert alert-danger text-center"},Ht={class:"p-4 row col-12"},It={class:"col-6 offset-3"},Rt={class:"p-4 row col-12"},Ct={class:"col-6 offset-3"},Ft={class:"p-4 row col-12"},Bt={class:"col-6 offset-3"},Nt={key:1,class:"btn btn-success m-4 col-2 text-light",type:"submit"},_t={key:2,class:"m-4 spinner-border spinner-border-sm text-primary"};function zt(e,t,n,r,c,o){return Object(i["v"])(),Object(i["g"])("div",Pt,[Object(i["h"])("div",Tt,[Et,Object(i["h"])("div",St,[Object(i["h"])("form",{onSubmit:t[3]||(t[3]=Object(i["L"])((function(t){return e.register()}),["prevent"])),autocomplete:"off"},[e.error?(Object(i["v"])(),Object(i["g"])("div",Mt,Object(i["E"])(e.error),1)):Object(i["f"])("",!0),Object(i["h"])("div",Ht,[Object(i["h"])("div",It,[Object(i["K"])(Object(i["h"])("input",{minlength:"3",class:"form-control",id:"email",type:"text",placeholder:"email","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.email=t}),autocomplete:"off"},null,512),[[i["H"],e.email]])])]),Object(i["h"])("div",Rt,[Object(i["h"])("div",Ct,[Object(i["K"])(Object(i["h"])("input",{minlength:"3",class:"form-control",id:"password",type:"password",placeholder:"passwort","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.password=t}),autocomplete:"off"},null,512),[[i["H"],e.password]])])]),Object(i["h"])("div",Ft,[Object(i["h"])("div",Bt,[Object(i["K"])(Object(i["h"])("input",{minlength:"3",class:"form-control",id:"confirm",type:"password",placeholder:"passwort","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.confirmed=t}),autocomplete:"off"},null,512),[[i["H"],e.confirmed]])])]),e.registering?Object(i["f"])("",!0):(Object(i["v"])(),Object(i["g"])("button",Nt,"Registrieren")),e.registering?(Object(i["v"])(),Object(i["g"])("span",_t)):Object(i["f"])("",!0)],32)])])])}var Lt=Object(i["l"])({data:function(){return{confirmed:"",password:"",email:"",error:"",registering:!1}},methods:{register:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.confirmed!==e.password&&(e.error="Die passwörter stimmen nicht überein"),e.registering=!0,t.prev=2,t.next=5,gt(e.email,e.password);case 5:e.$router.push("/game"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](2),console.log("couldn't register",t.t0),e.error="Der Account konnte leider nicht registriert werden";case 12:return t.prev=12,e.registering=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,8,12,15]])})))()}}});n("5ef0");const Wt=o()(Lt,[["render",zt],["__scopeId","data-v-7d279aa2"]]);var Vt=Wt,Kt=function(e){return Object(i["y"])("data-v-660cf77d"),e=e(),Object(i["w"])(),e},At={class:"container d-flex align-items-stretch justify-content-center flex-column",style:{height:"100vh"}},Jt={class:"card w-75",style:{"margin-left":"12.5%"}},Ut=Kt((function(){return Object(i["h"])("div",{class:"card-header"},"Login",-1)})),Gt={class:"card-body"},Dt={key:0,class:"m-4 alert alert-danger text-center"},qt={class:"p-4 row col-12"},$t={class:"col-6 offset-3"},Yt={class:"p-4 row col-12"},Xt={class:"col-6 offset-3"},Qt={key:1,class:"btn btn-success m-4 col-2",type:"submit"},Zt={key:2,class:"m-4 spinner-border spinner-border-sm text-primary"};function en(e,t,n,r,c,o){return Object(i["v"])(),Object(i["g"])("div",At,[Object(i["h"])("div",Jt,[Ut,Object(i["h"])("div",Gt,[Object(i["h"])("form",{onSubmit:t[3]||(t[3]=Object(i["L"])((function(t){return e.login()}),["prevent"])),autocomplete:"off"},[e.error?(Object(i["v"])(),Object(i["g"])("div",Dt,"Username or password is not correct")):Object(i["f"])("",!0),Object(i["h"])("div",qt,[Object(i["h"])("div",$t,[Object(i["K"])(Object(i["h"])("input",{minlength:"3",class:"form-control",id:"email",type:"text",placeholder:"email","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.email=t}),autocomplete:"off"},null,512),[[i["H"],e.email]])])]),Object(i["h"])("div",Yt,[Object(i["h"])("div",Xt,[Object(i["K"])(Object(i["h"])("input",{minlength:"3",class:"form-control",id:"password",type:"password",placeholder:"passwort","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.password=t}),autocomplete:"off"},null,512),[[i["H"],e.password]])])]),e.loggingIn?Object(i["f"])("",!0):(Object(i["v"])(),Object(i["g"])("button",Qt,"Anmelden")),e.loggingIn?(Object(i["v"])(),Object(i["g"])("span",Zt)):Object(i["f"])("",!0),Object(i["h"])("button",{class:"btn btn-info m-4 col-2",type:"button",onClick:t[2]||(t[2]=function(t){return e.register()})},"Registrieren")],32)])])])}var tn=Object(i["l"])({data:function(){return{password:"",email:"",error:!1,loggingIn:!1}},methods:{login:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.error=!1,e.loggingIn=!0,t.prev=2,t.next=5,ft(e.email,e.password);case 5:console.log("logged in with:"+e.email),e.email="",e.password="",e.$router.push("/main"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.error({"couldn't login":t.t0});case 14:return t.prev=14,e.password="",e.error=!0,e.loggingIn=!1,t.finish(14);case 19:case"end":return t.stop()}}),t,null,[[2,11,14,19]])})))()},register:function(){this.$router.push("/register")}}});n("505e");const nn=o()(tn,[["render",en],["__scopeId","data-v-660cf77d"]]);var rn=nn,cn={class:"container d-flex align-items-center",style:{height:"100vh"}},on={class:"row col-12 d-flex align-items-center justify-content-around"},an=Object(i["h"])("div",null,"MapBuilder",-1),sn=[an],ln=Object(i["h"])("div",null,"Game",-1),dn=[ln],un=Object(i["h"])("div",null,"Statistics",-1),hn=[un];function pn(e,t,n,r,c,o){return Object(i["v"])(),Object(i["g"])("div",cn,[Object(i["h"])("div",on,[Object(i["h"])("div",{class:"col-3 m-3 btn btn-outline cardOption p-0",onClick:t[0]||(t[0]=function(t){return e.openBuilder()})},sn),Object(i["h"])("div",{class:"col-3 m-3 btn btn-outline cardOption p-0",onClick:t[1]||(t[1]=function(t){return e.openGame()})},dn),Object(i["h"])("div",{class:"col-3 m-3 btn btn-outline cardOption p-0",onClick:t[2]||(t[2]=function(t){return e.openStats()})},hn)])])}var bn=Object(i["l"])({data:function(){return{}},methods:{openBuilder:function(){this.$router.push("/Mapbuilder")},openGame:function(){this.$router.push("/Game")},openStats:function(){this.$router.push("/Stats")}}});n("bf04");const fn=o()(bn,[["render",pn]]);var vn=fn,gn=[{path:"/",name:"Login",component:rn},{path:"/register",name:"Register",component:Vt},{path:"/main",name:"Main",component:vn},{path:"/game",name:"Game",component:Le},{path:"/MapBuilder",name:"MapBuilder",component:xt}],jn=Object(u["a"])({history:Object(u["b"])(),routes:gn}),On=Object(i["A"])(null),mn=function(){var e=Object(bt["b"])();return new Promise((function(t,n){var i=Object(bt["c"])(e,(function(e){On.value=e,i(),t(e)}),n)}))};jn.beforeEach(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,i){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.matched.some((function(e){return e.meta.requiresAuth})),e.next=3,mn();case 3:if(e.t0=!e.sent,!e.t0){e.next=6;break}e.t0=r;case 6:if(!e.t0){e.next=10;break}i("/login"),e.next=11;break;case 10:i();case 11:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}());var yn=jn,wn=(n("abe2"),n("ab8b"),n("7b17"),n("7051"),n("260b")),xn={apiKey:"AIzaSyDEPp1rKaHb8KgBYiaelwkhViARw9SCymo",authDomain:"towerdefence-c7b47.firebaseapp.com",projectId:"towerdefence-c7b47",storageBucket:"towerdefence-c7b47.appspot.com",messagingSenderId:"688852858765",appId:"1:688852858765:web:e89c44b45973472b34efc4"};Object(wn["a"])(xn);Object(i["d"])(l).use(yn).mount("#app")},ceab:function(e,t,n){"use strict";n("a66a")}});
//# sourceMappingURL=app.e8eece1a.js.map